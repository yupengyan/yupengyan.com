var tipuesearch = {"pages":[{"title":"github pages","text":"Set up a Custom domain DNS : Add an A record point to github server. 185.199.108.153 185.199.109.153 185.199.110.153 185.199.111.153 Go to your repo setting. Rename your repositry name to :example.com Setting -> Github pages -> Custom domain -> example.com Add a CNAME file in your repositry. examle.com That's it! FAQ : Q: CNAME already taken, what should I do? A: Ask github for help! They are very nice.Go to see more detail .","tags":"Server","url":"https://yupengyan.com/github-pages","loc":"https://yupengyan.com/github-pages"},{"title":"markdown guide","text":"Images Way 1: 1. Open the file containing the Linux mascot. 2. Marvel at its beauty. ![Tux, the Linux mascot](/assets/images/tux.png) 3. Close the file. Way 2:Reference style Here's an image: ![][image_ref_a32ff4ads] More text here... ... [image_ref_a32ff4ads]: data:image/png;base64,iVBORw0KGgoAAAANSUhEke02C1MyA29UWKgPA...RS12D== Links Way 1: My favorite search engine is [Duck Duck Go](https://duckduckgo.com). The Html output html looks like this: My favorite search engine is < a href = \"https://duckduckgo.com\" > Duck Duck Go </ a > . Way 2: Reference style In a hole in the ground there lived a hobbit. Not a nasty, dirty, wet hole, filled with the ends of worms and an oozy smell, nor yet a dry, bare, sandy hole with nothing in it to sit down on or to eat: it was a [hobbit-hole][1], and that means comfort. [1]: < https: // en . wikipedia . org / wiki / Hobbit # Lifestyle > \"Hobbit lifestyles\" Way 3:Quick links < https: // www . markdownguide . org > < fake @ example . com >","tags":"Server","url":"https://yupengyan.com/markdown-guide","loc":"https://yupengyan.com/markdown-guide"},{"title":"crawl base: pyppeteer handbook","text":"JS 操作 运行JS脚本： dimensions = await page . evaluate ( '''() => { return { width: document.documentElement.clientWidth, height: document.documentElement.clientHeight, deviceScaleFactor: window.devicePixelRatio, } }''' ) 结果： # >>> {'width': 800, 'height': 600, 'deviceScaleFactor': 1} 举一反三： text_point_today = await page . evaluate ( '''() => { return document.getElementsByClassName(\"buttonbox\")[0].textContent }''' ) 完整Example: import asyncio from pyppeteer import launch async def main (): browser = await launch () page = await browser . newPage () await page . goto ( 'http://example.com' ) await page . screenshot ({ 'path' : 'example.png' }) dimensions = await page . evaluate ( '''() => { return { width: document.documentElement.clientWidth, height: document.documentElement.clientHeight, deviceScaleFactor: window.devicePixelRatio, } }''' ) print ( dimensions ) # >>> {'width': 800, 'height': 600, 'deviceScaleFactor': 1} await browser . close () asyncio . get_event_loop () . run_until_complete ( main ())","tags":"Review","url":"https://yupengyan.com/crawl-base-pyppeteer-handbook","loc":"https://yupengyan.com/crawl-base-pyppeteer-handbook"},{"title":"crawl base: selector","text":"CSS 选择器参考手册 选择器 例子 例子描述 CSS .class .intro 选择 class=\"intro\" 的所有元素。 1 #id #firstname 选择 id=\"firstname\" 的所有元素。 1 * * 选择所有元素。 2 element p 选择所有 元素。 1 element,element div,p 选择所有 元素和所有 元素。 1 element element div p 选择 元素内部的所有 元素。 1 element>element div>p 选择父元素为 元素的所有 元素。 2 element+element div+p 选择紧接在 元素之后的所有 元素。 2 [attribute] [target] 选择带有 target 属性所有元素。 2 [attribute=value] [target=_blank] 选择 target=\"_blank\" 的所有元素。 2 [attribute~=value] [title~=flower] 选择 title 属性包含单词 \"flower\" 的所有元素。 2 [attribute=value] [lang=en] 选择 lang 属性值以 \"en\" 开头的所有元素。 2 :link a:link 选择所有未被访问的链接。 1 :visited a:visited 选择所有已被访问的链接。 1 :active a:active 选择活动链接。 1 :hover a:hover 选择鼠标指针位于其上的链接。 1 :focus input:focus 选择获得焦点的 input 元素。 2 :first-letter p:first-letter 选择每个 元素的首字母。 1 :first-line p:first-line 选择每个 元素的首行。 1 :first-child p:first-child 选择属于父元素的第一个子元素的每个 元素。 2 :before p:before 在每个 元素的内容之前插入内容。 2 :after p:after 在每个 元素的内容之后插入内容。 2 :lang(language) p:lang(it) 选择带有以 \"it\" 开头的 lang 属性值的每个 元素。 2 element1~element2 p~ul 选择前面有 元素的每个 元素。 3 [attribute&#94;=value] a[src&#94;=\"https\"] 选择其 src 属性值以 \"https\" 开头的每个 元素。 3 [attribute$=value] a[src$=\".pdf\"] 选择其 src 属性以 \".pdf\" 结尾的所有 元素。 3 [attribute*=value] a[src*=\"abc\"] 选择其 src 属性中包含 \"abc\" 子串的每个 元素。 3 :first-of-type p:first-of-type 选择属于其父元素的首个 元素的每个 元素。 3 :last-of-type p:last-of-type 选择属于其父元素的最后 元素的每个 元素。 3 :only-of-type p:only-of-type 选择属于其父元素唯一的 元素的每个 元素。 3 :only-child p:only-child 选择属于其父元素的唯一子元素的每个 元素。 3 :nth-child(n) p:nth-child(2) 选择属于其父元素的第二个子元素的每个 元素。 3 :nth-last-child(n) p:nth-last-child(2) 同上，从最后一个子元素开始计数。 3 :nth-of-type(n) p:nth-of-type(2) 选择属于其父元素第二个 元素的每个 元素。 3 :nth-last-of-type(n) p:nth-last-of-type(2) 同上，但是从最后一个子元素开始计数。 3 :last-child p:last-child 选择属于其父元素最后一个子元素每个 元素。 3 :root :root 选择文档的根元素。 3 :empty p:empty 选择没有子元素的每个 元素（包括文本节点）。 3 :target #news:target 选择当前活动的 #news 元素。 3 :enabled input:enabled 选择每个启用的 元素。 3 :disabled input:disabled 选择每个禁用的 元素 3 :checked input:checked 选择每个被选中的 元素。 3 :not(selector) :not(p) 选择非 元素的每个元素。 3 ::selection ::selection 选择被用户选取的元素部分。 3 参考： http://www.w3school.com.cn/cssref/css_selectors. ASP exceltk, 转换excel表格到markdown, 下载： http://files.cnblogs.com/files/math/exceltk.0.1.3.zip","tags":"Review","url":"https://yupengyan.com/crawl-base-selector","loc":"https://yupengyan.com/crawl-base-selector"},{"title":"Git handbook:using Git in a team","text":"前期准备 Git windows 客户端安装 管理者 新建一个develop分支（from master）http://172.19.13.51:8929/ 为合作者新建一个合作者分支，如cjj 合作者在合作者分支上面修改代码，合并到develop，然后提交到Git服务器。 合作者 Git global setup git config --global user.name \"yupengyan\" git config --global user.email \"ypy@example.com\" Create a new repository git clone git@gitlab.library.gdufe.edu.cn:pengyan/ve3_smartkits.git cd ve3_smartkits touch README.md git add README.md git commit -m \"add README\" git push -u origin master Existing folder cd existing_folder git init git remote add origin git@gitlab.library.gdufe.edu.cn:pengyan/ve3_smartkits.git git add . git commit -m \"Initial commit\" git push -u origin master Existing Git repository cd existing_repo git remote rename origin old-origin git remote add origin git@gitlab.library.gdufe.edu.cn:pengyan/ve3_smartkits.git git push -u origin --all git push -u origin --tags 以项目 http://172.19.13.51:8929/pengyan/dl_documents 合作为例： 1. 安装Git 2. Git global setup git config --global user.name \"py\" git config --global user.email \"ypy@gdufe.edu.cn\" 对于需要用Key认证的，先配置。In ~/.ssh/config, add: (如果不是默认22，指定Port很重要) host gitlab.library.gdufe.edu.cn HostName 172.19.13.51 Port 2289 IdentityFile E:/OneDrive/privates/#keys/Identity-gitlib-openssh User pengyan host git-2 HostName 172.19.13.51 Port 2289 IdentityFile E:/OneDrive/privates/#keys/Identity-gitlib-openssh User pengyan Create a new repository cd my_work_place git clone git@gitlab.library.gdufe.edu.cn:pengyan/dl_documents.git cd dl_documents 常用操作 查看有什么分支 git branch 这个命令的意思就是拉取远程的一个叫develop的分支，并在本地创建一个叫develop的分支和远程的分支匹配。 git fetch origin develop:develop 拉取自己的分支 git fetch origin xzl:xzl 每个人的所有开发工作都只在自己的分支开发。例如小谢开发，你就在本地切换到自己的xzl分支然后进行开发。 git checkout xzl 每个人只允许在自己的分支直接push远程分支。 touch README.md git add README.md git commit -m \"add README\" git push -u origin xzl 合并的时候必须遵循以下条件 a) 首先，本地切换到develop分支 git checkout develop b) pull develop分支最新内容到本地 git pull origin develop c) 保证develop最新前提下合并自己的分支xzl git merge xzl d) 如果出现conflict那么清除conflict之后，commit.然后把本地develop push 到远程的develop.每完成一个功能就提交一次。不要累计代码。 git add README.md git commit -m \"add README\" git merge xzl git push -u origin develop","tags":"Server","url":"https://yupengyan.com/git-handbookusing-git-in-a-team","loc":"https://yupengyan.com/git-handbookusing-git-in-a-team"},{"title":"github quick start","text":"Quick setup — if you've done this kind of thing before https://github.com/yupengyan/ve3_scrapy.git Get started by creating a new file or uploading an existing file. We recommend every repository include a README , LICENSE , and .gitignore. or create a new repository on the command line echo \"# ve3_scrapy\" >> README.md git init git add README.md git commit -m \"first commit\" git remote add origin https://github.com/yupengyan/ve3_scrapy.git git push -u origin master or push an existing repository from the command line cd existing_repo git remote rename origin old-origin git remote add origin https://github.com/yupengyan/ve3_scrapy.git git push -u origin master or git push -u origin --all or git push -u origin --tags","tags":"Server","url":"https://yupengyan.com/github-quick-start","loc":"https://yupengyan.com/github-quick-start"},{"title":"math for AI","text":"AI基石 第1章 高等数学 1.1 导数和偏导数 1.2 梯度向量 1.3 极值定理 1.4 Jacobbi矩阵 1.5 Hessian矩阵 1.6 泰勒展开公式 1.7 拉格朗日乘数法 第2章 线性代数 2.1 向量及其运算 2.2 范数 2.3 矩阵及其运算 2.4 逆矩阵 2.5 二次型 2.6 矩阵的正定性 2.7 矩阵的特征值与特征向量 2.8 矩阵的奇异值分解 第3章 概率论 3.1 概率、随机事件和随机变量 3.2 条件概率与贝叶斯公式 3.3 常用的概率分布 3.4 随机变量的均值和方差、协方差 3.5 最大似然估计 第4章 最优化 4.1 凸集、凸函数 4.2 凸优化问题的标准形式 4.3 线性规划问题 优化论初步 第一章 优化迭代法统一论 1.0 本微专业概述 1.1 线性回归建模 1.2 无约束优化梯度分析法（上） 1.3 无约束优化梯度分析法（下） 1.4 无约束迭代法 1.5 线性回归求解 1.6 案例分析 第二章 深度学习反向传播 2.1 回归与分类、神经网络 2.2 BP算法（上） 2.3 BP算法（下） 2.4 计算图 优化论进阶 第一章 凸优化基础 1.1 一般优化问题 1.2 凸集和凸函数基础（上） 1.3 凸集和凸函数基础（下） 1.4 凸优化问题 1.5 案例分析 第二章 凸优化进阶之对偶理论 2.1 凸优化问题 2.2 对偶（上） 2.3 对偶（下） 2.4 问题案例 第三章 SVM 3.1 问题案例 3.2 SVM 建模 3.3 SVM 求解 3.4 SVM 扩展，附案例 数据降维的艺术 第一章 矩阵分析上篇 1.1 矩阵与张量 1.2 可逆矩阵 1.3 线性相关 1.4 子空间 1.5 范数 1.6 特殊矩阵和特征分解 案例： PCA 数据降维 第二章 矩阵分析下篇 2.1 SVD 2.2 SVD 与特征分解关系 2.3 图像压缩 2.4 伪逆 2.5 迹与行列式 案例： SVD 对图像进行压缩 统计推断的魅力 第一章 概率统计上篇 1.1 事件 1.2 随机变量 1.3 概率与条件概率 1.4 贝叶斯定理 1.5 朴素贝叶斯 1.6 期望、方差、协方差 1.7 最大似然、最大后验 案例：垃圾邮件过滤 第二章 概率统计中篇 2.1 常见分布总结 2.2 最大似然与贝叶斯的关系 2.3 熵与互信息 案例：最大似然估计 第三章 概率统计下篇 3.1 以 GMM 为例的统计建模 3.2 EM 算法 案例： GMM 实践","tags":"Server","url":"https://yupengyan.com/math-for-ai","loc":"https://yupengyan.com/math-for-ai"},{"title":"Build a blog with hexo","text":"安装node 在Windows下，从 https://nodejs.org/en/ 下载以.msi为扩展名的安装包，如果不需要进行node相关开发的话，选LTS版本就够用了。 在Ubuntu下，可以利用nvm装node curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.31.0/install.sh | bash # 安装nvm nvm install node # 安装最新版本node nvm ls # 查看已安装的版本 nvm use node # 使用node 安装hexo npm install -g hexo-cli npm install hexo-deployer-git --save # 安装部署站点的node功能包，hexo deploy命令需要 建立站点仓库 hexo init blog # 初始化一个站点目录 cd blog npm install 配置站点 一般hexo初始化后的站点目录结构如下 /blog |-- _config.yml # 站点配置文件 |-- scaffolds # 页面模板存放的目录 | |-- post.html # 博文模板 | |-- page.html # 分页模板 | \\-- draft.html # 草稿模板 |-- source # 博文源文件目录 | |-- _posts # 存放博文的目录 | \\-- _drafts # 存放草稿的目录 |-- themes # 存放主题文件夹的目录 |-- package.json |-- node_modules # 功能依赖包 \\-- .gitignore # push的时候忽略node_modules文件夹等 修改_config.yml文件，整个站点的配置主要是在这个文件中修改 title : 博客名 description : 博客简述 author : 作者名 url : http ( s ):// your . site . com root : /your/project/path or / deploy : type : git repo : git @ github . com : userName / blog . git branch : gh - pages message : [ 自定义的提交信息 ] 撰写博文 每当需要撰写心得博文时，只需要执行以下命令，就可以得到一个标题和日期已经设置好的markdown文件 hexo new [layout] ‘博文标题' # layout是可选项，表示使用哪种模板来创建页面文件，默认是post 博文结构的头部 title : 博文标题 date : yyyy - mm - dd # 日期是创建博文源文件时自动生成的 categories : - category1 - category2 tags : - tag1 - tag2 comments : true 做好源文件的版本控制 由于hexo是自动将站点文件自动部署到GitHub Pages上的，所以不需要自己另外push，但是建立生成站点页面的分支，还是有必要的。 git init git remote add origin git@github.com:userName/blog.git # 与你的github blog仓库建立联系 git checkout --orphan source git push origin source 部署站点 hexo的站点部署很简单 hexo g # 生成编译后的静态站点文件 hexo d # 部署到远程仓库 或者可以结合起来，生成静态文件后直接部署，下面两条命令使用一条即可 hexo g -d # 生成后部署 hexo d -g # 部署前生成 以后每次有新的文章发布，只需要如下操作 hexo new ‘博文标题' hexo g -d 常用hexo命令 hexo init <站点仓库的目录> # 初始化一个站点目录 hexo clean # 用于主题切换等涉及站点整体布局效果改变的行为时，清楚hexo原有缓存 hexo new '博文标题' # 新增一篇博文 hexo generate # 可简写为 hexo g ，编译生成静态页面文件 hexo server # 可简写为 hexo s ，开启本地服务器预览与测试编译生成的静态页面效果 hexo delpoy # 可简写为 hexo d ，部署站点到远程仓库 hexo generate -d # 可简写为 hexo g -d ，编译生成静态页面文件并部署到远程仓库 hexo deploy -g # 可简写为 hexo d -g ，同上 修改主题 从hexo themes找到何意的主题，clone下来，放到站点本地仓库的themes目录下，修改_config.yml文件的theme字段为对应的主题名 theme: light 更多插件等功能，建议去hexo 官网查看。","tags":"Server","url":"https://yupengyan.com/build-a-blog-with-hexo","loc":"https://yupengyan.com/build-a-blog-with-hexo"},{"title":"firewalld handbook","text":"cmd systemctl enable firewalld systemctl disable firewalld systemctl start firewalld systemctl stop firewalld systemctl status firewalld firewall-cmd --list-all firewall-cmd --permanent --zone=public --add-port=5000/tcp firewall-cmd --reload firewall-cmd --permanent --zone=public --add-port=80/tcp firewall-cmd --permanent --zone=public --add-port=443/tcp","tags":"Server","url":"https://yupengyan.com/firewalld-handbook","loc":"https://yupengyan.com/firewalld-handbook"},{"title":"mongodb handbook","text":"时间格式的查询 datetime满足大于xxx时间： {'datetime':{'$gte':{\"$date\":\"2018-11-01T05:36:45Z\"}}}","tags":"Database","url":"https://yupengyan.com/mongodb-handbook","loc":"https://yupengyan.com/mongodb-handbook"},{"title":"web server protect","text":"检测连接： netstat -nt | grep your_server_ip | awk '{print $5}' | awk -F\":\" '{print $1}'| sort | uniq -c | sort -r -n 比如： [root@Haproxy jsb]# netstat -nt | grep 202.116.48.23:80 | awk '{print $5}' | awk -F\":\" '{print $1}'| sort | uniq -c | sort -r -n 27 172.28.48.22 22 172.28.48.89 9 42.236.99.206 9 42.236.54.2 8 42.236.99.72 8 220.243.136.188 7 220.243.136.62 7 220.243.135.125 6 42.236.99.86 6 42.236.99.194 6 42.236.54.22 6 220.243.136.251 6 220.243.135.62 6 220.243.135.251 5 42.236.99.79 5 42.236.99.166 5 220.243.136.125 5 220.243.135.155 5 220.243.135.104 4 42.236.99.44 4 42.236.54.62 4 42.236.46.85 4 42.236.102.23 4 220.243.136.29 4 220.243.135.92 4 220.243.135.29 4 117.122.222.180 3 42.236.99.16 3 42.236.99.130 3 42.236.12.150 3 42.236.12.130 3 42.236.103.66 3 220.243.136.78 3 220.243.136.41 3 220.243.136.15 3 220.243.135.44 3 220.243.135.41 3 220.243.135.218 3 220.243.135.204 3 220.243.135.167 3 220.243.135.162 3 139.217.198.91 2 42.236.99.65 2 42.236.99.30 2 42.236.102.3 2 42.236.101.214 2 220.243.136.218 2 220.243.136.170 2 220.243.136.104 2 220.243.135.230 2 220.243.135.188 2 139.217.199.91 2 139.217.199.33 1 61.151.178.197 1 54.223.119.62 1 52.83.254.182 1 52.83.219.14 1 52.81.11.30 1 50.35.31.142 1 42.236.99.2 1 42.236.99.154 1 42.236.99.142 1 42.236.12.190 1 42.236.10.89 1 42.236.10.71 1 42.236.101.234 1 220.243.136.92 1 220.243.136.80 1 220.243.136.4 1 220.243.136.233 1 220.243.136.230 1 220.243.136.225 1 220.243.136.204 1 220.243.136.17 1 220.243.136.162 1 220.243.136.155 1 220.243.136.141 1 220.243.136.130 1 220.243.135.99 1 220.243.135.67 1 220.243.135.233 1 220.243.135.184 1 220.243.135.164 1 220.243.135.15 1 220.243.135.143 1 220.243.135.107 1 14.16.108.88 1 139.219.1.232 1 139.217.197.212 1 139.217.197.175 1 139.217.196.231 1 13.66.139.0 1 125.88.223.58 220.243.135.0 这类规律性的IP可能就是爬虫了…可以用Haprox等web应用服务器block,也可以用防火墙block，当然也有可能是搜索引擎，block前搞清楚。 处理 放入防火墙拒绝 firewall-cmd --permanent --add-rich-rule=\"rule family='ipv4' source address='180.76.15/24' reject\" firewall-cmd --reload 放入haproxy黑名单 haproxy.cfg frontend 放入： # Black list ###### acl bad_ip src -f /usr/local/etc/haproxy/block-ip.txt tcp-request connection reject if bad_ip block-ip.txt 放入ip地址： 220.243.135.0/24 [root@localhost docker_haproxy]# vi block-ip.txt 180.163.228.0/24 180.163.227.0/24 180.163.226.0/24 180.163.225.0/24 42.236.99.0/24 42.236.10.0/24","tags":"Server","url":"https://yupengyan.com/web-server-protect","loc":"https://yupengyan.com/web-server-protect"},{"title":"docker errors","text":"Build the image: Host mapping \"/home/data/dv_haproxy\" has no effect https://111qqz.com/2018/11/%E8% AE %B0%E4%B8%80%E6% AC %A1%E5%9C%A8-docker-compose-%E4%B8% AD %E4% BD % BF %E7%94%A8volume%E7%9A%84%E8%B8%A9%E5%9D%91%E8% AE %B0%E5% BD %95/ docker-compose.yml中定义的volumes无效： WARNING: Service \"https\" is using volume \"/var/spool/cron/cronstamps\" from the previous container. Host mapping \"/home/data/dv_haproxy\" has no effect. Remove the existing containers (with `docker-compose rm https`) to use the host volume mapping. 解决方案： 1.不手动创建volume，而是在docker-compose.yml中，设置volume的mountpoint 2.在docker-compose.yml中，添加external: true的选项到 volume中，参考external https://docs.docker.com/compose/compose-file/#external version: '3' services: django: image: \"registry.sensetime.com/spider/sensespider:v1.0\" volumes: - spiderdata:/data privileged: true ports: - \"8000:8000\" working_dir: /home/renkuanze/workspace/sensespider entrypoint: bash run.sh tty: true container_name: django splash: image: \"scrapinghub/splash\" container_name: splash network_mode: \"service:django\" volumes: spiderdata: driver: local-persist driver_opts: mountpoint: /data/spider_data [root@localhost gitlab]# docker restart gitlab Error response from daemon: Cannot restart container gitlab: oci runtime error: container with id exists: ff85edf195f77b5415f1089c81d7d51759e04f4875dd2b224262d189f3c50e3e","tags":"Server","url":"https://yupengyan.com/docker-errors","loc":"https://yupengyan.com/docker-errors"},{"title":"docker handbook","text":"Build the image: $ sudo docker build -t ubuntu_precise/galera:codership . docker build -f Dockerfile-py2 -t webapp . docker build -t haproxy . docker run -d -p 80 :80 webapp $ docker run --name some-mariadb -v /my/custom:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD = my-secret-pw -d mariadb:tag $ docker exec some-mariadb sh -c 'exec mysqldump --all-databases -uroot -p\"$MYSQL_ROOT_PASSWORD\"' > /some/path/on/your/host/all-databases.sql Build and run docker run --name some-mariadb -p 3306:3306 --restart=on-failure:5 -v /home/data/syncthing/data/docker-data/mariadb/conf/:/etc/mysql/conf.d -v /home/data/syncthing/data/docker-data/mariadb/mysql:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=tsg#mysqlDB6916 -d mariadb:latest 调出Docker的命令行： docker exec -it some-mariadb bash firewall-cmd --permanent --add-port=3306/tcp firewall-cmd --reload Install [root@mysql yum.repos.d]# yum install -y docker-ce-17.09.0.ce sudo systemctl start docker sudo systemctl enable docker docker run hello-world ``` https://docs.docker.com/engine/reference/commandline/run/#publish-or-expose-port--p---expose docker run -e MYVAR1 —env MYVAR2 =foo —env-file ./env.list ubuntu bash \"`","tags":"Server","url":"https://yupengyan.com/docker-handbook","loc":"https://yupengyan.com/docker-handbook"},{"title":"docker's installation in CentOS7","text":"install Docker yum remove docker \\ docker-client \\ docker-client-latest \\ docker-common \\ docker-latest \\ docker-latest-logrotate \\ docker-logrotate \\ docker-selinux \\ docker-engine-selinux \\ docker-engine curl -sSL https://get.docker.com/ | sh yum install -y docker-compose $ curl -fsSL get.docker.com -o get-docker.sh $ sudo sh get-docker.sh --mirror Aliyun /etc/systemd/system/containerd.service.d [Unit] Description = Docker Application Container Engine Documentation = https://docs.docker.com BindsTo = containerd.service After = network-online.target firewalld.service Wants = network-online.target [Service] Type = notify # the default is not to use systemd for cgroups because the delegate issues still # exists and systemd currently does not support the cgroup feature set required # for containers run by docker ExecStart = /usr/bin/dockerd -H unix:// ExecReload = /bin/kill -s HUP $MAINPID TimeoutSec = 0 RestartSec = 2 Restart = always # Note that StartLimit* options were moved from \"Service\" to \"Unit\" in systemd 229. # Both the old, and new location are accepted by systemd 229 and up, so using the old location # to make them work for either version of systemd. StartLimitBurst = 3 # Note that StartLimitInterval was renamed to StartLimitIntervalSec in systemd 230. # Both the old, and new name are accepted by systemd 230 and up, so using the old name to make # this option work for either version of systemd. StartLimitInterval = 60s # Having non-zero Limit*s causes performance problems due to accounting overhead # in the kernel. We recommend using cgroups to do container-local accounting. LimitNOFILE = infinity LimitNPROC = infinity LimitCORE = infinity # Comment TasksMax if your systemd version does not supports it. # Only systemd 226 and above support this option. TasksMax = infinity # set delegate yes so that systemd does not reset the cgroups of docker containers Delegate = yes # kill only the docker process, not all processes in the cgroup KillMode = process Errors docker: Error response from daemon: OCI runtime create failed: unable to retrieve OCI runtime error (open /run/docker/containerd/daemon/io.containerd.runtime.v1.linux/moby/e2b1c3db53f33b6027eb4f644429aeb1eee4b0096d7f76686f7ce88f12019062/log.json: no such file or directory): runc did not terminate sucessfully: unknown. I have the same problem. Installing an older docker-ce should work. cat /etc/centos-release CentOS Linux release 7.1.1503 (Core) yum install docker-ce-17.06.1.ce systemctl start docker docker pull nginx [root@Haproxy docker-haproxy-certbot]# cat /etc/centos-release CentOS Linux release 7.6.1810 (Core) [root@Haproxy docker-haproxy-certbot]# docker -v Docker version 18.09.0, build 4d60db4","tags":"Review","url":"https://yupengyan.com/dockers-installation-in-centos7","loc":"https://yupengyan.com/dockers-installation-in-centos7"},{"title":"how to change the docker data's location","text":"Steps 默认情况下Docker的存放位置为：/var/lib/docker，跟系统同一个磁盘，很容易就满，而且不安全。可以考虑迁移到/home/data,步骤如下： 1) 暂停docker服务：systemctl stop docker 2) 数据迁移： mkdir /home/data/docker | mv /var/lib/docker /home/data/docker 3) 建立软连接：ln -s /home/data/docker /var/lib/docker Errors 过程中可能遇到的问题： mv: 无法删除\"/var/lib/docker/containers/6844f2ed7bbb9da7b232240ea980c02e25050abb04786e93bae4850a6125be90/shm\": 设备或资源忙 mv: 无法删除\"/var/lib/docker/containers/ff85edf195f77b5415f1089c81d7d51759e04f4875dd2b224262d189f3c50e3e/shm\": 设备或资源忙 据说是docker某版本的一个bug，可以将文件夹umount，再删除： umount /var/lib/docker/plugins umount /var/lib/docker/containers 然后： mv /var/lib/docker /var/lib/docker2 最后用 df -h ，可以看到数据已经被迁移。","tags":"Server","url":"https://yupengyan.com/how-to-change-the-docker-datas-location","loc":"https://yupengyan.com/how-to-change-the-docker-datas-location"},{"title":"How to build a blog with Pelican","text":"http://docs.getpelican.com/en/3.6.3/quickstart.html 环境 set dir=%cd% set pythonHome=%dir%\\python-tools\\Python3.6.5 set path=%path%;%pythonHome%;%pythonHome%\\Scripts;%pythonHome%\\Lib\\site-packages\\ set projectName=ve3_pelican_github_page start cmd cd python-projects\\virtualenvs python -m venv %projectName% pause 安装依赖包: pip install pelican markdown Step 2 创建项目 mkdir -p ~/projects/yoursite cd ~/projects/yoursite pelican-quickstart 创建内容: Title: My First Review Date: 2010-12-03 10:20 Category: Review Title: My super title Date: 2010-12-03 10:20 Modified: 2010-12-05 19:30 Category: Python Tags: pelican, publishing Slug: my-super-post Authors: Alexis Metaireau, Conan Doyle Summary: Short version for index and feeds This is the content of my super blog post. Following is a review of my favorite mechanical keyboard. Given that this example article is in Markdown format, save it as ~/projects/yoursite/content/keyboard-review.md. 生成网站 pelican content pelican content -- output output -- settings publishconf . py -- verbose pelican content - o \"G:\\private src data\\yupengyan.com\" -- settings publishconf . py -- verbose 预览： cd ~/ projects / yoursite / output python - m pelican . server Theme git clone https://github.com/getpelican/pelican-themes.git cd pelican-themes Install pelican - themes - i tuxlite_tbs pelicanconf.py THEME = 'fresh' plugins git clone —recursive https://github.com/getpelican/pelican-plugins PLUGIN_PATHS = ['path/to/pelican-plugins'] PLUGINS = ['assets', 'sitemap', 'gravatar'] use theme:elegant dependens: pip install beautifulsoup4 pip install webassets pip install cssmin configuration example: pelicanconf.py publish to github page $ pelican content - o output - s pelicanconf . py $ ghp - import output $ git push git @github.com : elemoine / elemoine . github . io . git gh - pages : master ghp-import -p -b master \"G:/private src data/yupengyan.com/\" http://docs.getpelican.com/en/3.6.3/tips.html http://docs.getpelican.com/en/3.6.3/quickstart.html http://docs.getpelican.com/en/3.6.3/content.html https://blog.john-pfeiffer.com/how-to-set-up-a-pelican-static-blog-site/","tags":"Server","url":"https://yupengyan.com/how-to-build-a-blog-with-pelican","loc":"https://yupengyan.com/how-to-build-a-blog-with-pelican"},{"title":"pandas handhook","text":"删除含有空数据 import pandas as pd # 删除含有空数据的全部行 df4 = pd . read_csv ( '4.csv' , encoding = 'utf-8' ) df4 = df4 . dropna () # 可以通过axis参数来删除含有空数据的全部列 df4 = df4 . dropna ( axis = 1 ) # 可以通过subset参数来删除在age和sex中含有空数据的全部行 df4 = df4 . dropna ( subset = [ \"age\" , \"sex\" ]) print ( df4 ) df4 = df4 . dropna ( subset = [ 'age' , 'body' , 'home.dest' ]) df = pd . DataFrame ([[ 'GD' , 'GX' , 'FJ' ], [ 'SD' , 'SX' , 'BJ' ], [ 'HN' , 'HB' ... : , 'AH' ], [ 'HEN' , 'HEN' , 'HLJ' ], [ 'SH' , 'TJ' , 'CQ' ]], columns = [ 'p1' , 'p2 ... : ', ' p3 ']) In [ 4 ]: df Out [ 4 ]: p1 p2 p3 0 GD GX FJ 1 SD SX BJ 2 HN HB AH 3 HEN HEN HLJ 4 SH TJ CQ In [ 8 ]: df [ df . p1 . isin ([ 'GD' , 'HN' ])] Out [ 8 ]: p1 p2 p3 0 GD GX FJ 2 HN HB AH https://blog.csdn.net/xiaomuworld/article/details/52057804 https://blog.csdn.net/use_my_heart/article/details/52184897 def ExceQuery ( sql , database , chunksizes ): engine = create_engine ( database ) if chunksizes == None : df_list = pd . read_sql ( sql , engine ) else : df_list = [] for chunk in pd . read_sql ( sql , engine , chunksize = chunksizes ): df_list . append ( chunk ) print ( sql [ 0 : 40 ]) # 在多线程运行后查看是哪个sql语句运行完成了，以便清楚是堵在哪个查询上了 print ( datetime . datetime . now () . strftime ( '%Y-%m- %d %H:%M:%S' )) return df_list python lambda 使用if f = lambda x : 'big' if x > 100 else 'small' # or f = lambda x : [ 'small' , 'big' ][ x > 100 ] 删除重复数据 pandas . DataFrame . duplicated ( self , subset = None , keep = 'first' ) 其中参数解释如下： subset：用于识别重复的列标签或列标签序列，默认所有列标签 keep=‘frist'：除了第一次出现外，其余相同的被标记为重复 keep='last'：除了最后一次出现外，其余相同的被标记为重复 keep=False：所有相同的都被标记为重复 例子： #keep='first' df . duplicated () #默认所有列，无重复记录 df . duplicated ( 'col1' ) #第二、四、五行被标记为重复 df . duplicated ([ 'col1' , 'col2' ]) #第五行被标记为重复 #keep='last' df . duplicated ( 'col1' , keep = 'last' ) #第一、三、四行被标记重复 `` ` > 求和 `` ` python #对列求和 print ( data . sum ()) #对行求和 print ( data . sum ( axis = 1 )) 统计函数 df . count () #非空元素计算 df . min () #最小值 df . max () #最大值 df . idxmin () #最小值的位置，类似于R中的which.min函数 df . idxmax () #最大值的位置，类似于R中的which.max函数 df . quantile ( 0.1 ) #10%分位数 df . sum () #求和 df . mean () #均值 df . median () #中位数 df . mode () #众数 df . var () #方差 df . std () #标准差 df . mad () #平均绝对偏差 df . skew () #偏度 df . kurt () #峰度 df . describe () #一次性输出多个描述性统计指标 分组统计 依托group by,单列如： df . groupby ( ‘ sex ' ) . sum () 通过多个列进行分组形成一个层次索引，然后执行函数： df . groupby ([ ‘ sex ' , ' B ' ]) . sum () apply() and applymap() https://blog.csdn.net/qq_20412595/article/details/81131502 对DataFrame对象中的某些行或列，或者对DataFrame对象中的所有元素进行某种运算或操作，我们无需利用低效笨拙的循环， DataFrame给我们分别提供了相应的直接而简单的方法，apply()和applymap()。 其中apply()方法是针对某些行或列进行操作的，而applymap()方法则是针对所有元素进行操作的 df [ 'wide petal' ] = df [ 'petal width' ] . apply ( lambda v : 1 if v >= 1.3 else 0 ) df [ 'petal area' ] = df . apply ( lambda r : r [ 'petal length' ] * r [ 'petal width' ], axis = 1 ) df . applymap ( lambda v : np . log ( v ) if isinstance ( v , float ) else v )","tags":"Python","url":"https://yupengyan.com/pandas-handhook","loc":"https://yupengyan.com/pandas-handhook"}]};